"use strict";(self["webpackChunktwofourvue"]=self["webpackChunktwofourvue"]||[]).push([[345],{3345:function(t,e,a){a.r(e),a.d(e,{default:function(){return c}});var s=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"Mate_Box"}},[e("div",{staticClass:"Mate_left"},[e("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"#","on-change":t.handlePreview,"file-list":t.fileList,"auto-upload":!1}},[e("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),e("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:t.submitUpload}},[t._v("上传到服务器")])],1)],1),e("div",{staticClass:"Mate_right"},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[e("el-table-column",{attrs:{label:"素材",width:"240"},scopedSlots:t._u([{key:"default",fn:function(t){return[e("span",{staticStyle:{"margin-left":"10px"}}),e("img",{staticClass:"Mate_img",attrs:{src:"https://testshool.zzgoodqc.cn"+t.row.imgurl,alt:""}})]}}])}),e("el-table-column",{attrs:{label:"类别",width:"200"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s("1"==a.row.type?"分类":"服务"))])]}}])}),e("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.handleDelete(a.row)}}},[t._v("删除")])]}}])})],1)],1)])},l=[],i=a(2606),n={data(){return{fileList:[],tableData:[{imgurl:"",type:"",id:""}],imgurl:""}},created(){this.RenderPage()},methods:{RenderPage(){(0,i.zg)().then((t=>{this.tableData=t.data.data}))},submitUpload(){this.imgurl?(0,i.Ox)({imgurl:this.imgurl}).then((t=>{console.log(t),0===t.code?(this.RenderPage(),this.$message({type:"success",message:"上传服务器成功!"})):2===t.code&&this.$message({type:"info",message:"上传失败，数据不能为空"})})):this.$message({type:"warning",message:"请先选择要上传的图片"})},handlePreview(t){this.getBase64(t.raw).then((t=>{(0,i.aR)({imgurl:t}).then((t=>{this.imgurl=t.data.url}))}))},getBase64(t){return new Promise(((e,a)=>{let s=new FileReader,l="";s.readAsDataURL(t),s.onload=function(){l=s.result},s.onerror=function(t){a(t)},s.onloadend=function(){e(l)}}))},handleEdit(t,e){console.log(t,e)},handleDelete(t){this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{(0,i.v3)({id:t.id}).then((t=>{console.log(t),this.RenderPage()})),this.$message({type:"success",message:"删除成功!"})})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))}}},r=n,o=a(1656),u=(0,o.A)(r,s,l,!1,null,"332cdb3e",null),c=u.exports}}]);
//# sourceMappingURL=345.ac345168.js.map